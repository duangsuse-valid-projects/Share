<!doctype html><meta charset=utf-8><body><script>
const
  propCall=(op)=>new Proxy(op, {get:(f,k)=>f(k)}),
  getK=propCall(k=> o=>o[k]), n=getK.length,
  rep/*eat*/=(n,op)=>{for(let i=0;i<n;i++)op(i);},
  pipe=(f,g)=>(...a)=>g(f(...a)),
  arSet=(n,sets,make=Array)=>{let a=make(n); rep(n,sets(a)); return a},
  aryJust=(x,n)=>arSet(n,a=>i=>{a[i]=x})), //  区别是不用每次调用 op(i) 在rep()多一层，靠 for 就是差不多
  newAry=(n,op)=>arSet(n,a=>i=>{a[i]=op(i)})),
  comb=(xs,each_xiv)=>{},
  asEnumer=(op)=>(...a)=>(each=>op(...a,each)),
  combs=pipe(aryJust,asEnumer(comb)), //=a*n
  shapeD2=(a,m,fill)=>a.forEach((r,...p)=>r.push(...aryJust(fill(r,...p),m-n(r)) ),
  doc=document
</script>
